(this["webpackJsonpcandy-machine"]=this["webpackJsonpcandy-machine"]||[]).push([[0],{115:function(e,t,n){"use strict";(function(e){var r=n(1),a=n.n(r),c=n(4),i=n(12),o=n(23),s=n(2),u=n(20),d=n(10),l=n(119),b=n(121),f=(n(207),n(30)),p=n(16),m=l.a.metadata,O=m.Metadata,S=m.MetadataProgram,_=new u.d.PublicKey(Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_CONFIG),v=u.d.SystemProgram,T="processed";t.a=function(t){var n=t.walletAddress,r=Object(o.useState)(null),l=Object(i.a)(r,2),m=l[0],h=l[1],j=Object(o.useState)([]),x=Object(i.a)(j,2),E=x[0],g=x[1],y=Object(o.useState)(!1),P=Object(i.a)(y,2),A=P[0],C=P[1],D=Object(o.useState)(!1),N=Object(i.a)(D,2),R=N[0],w=N[1];Object(o.useEffect)((function(){k()}),[]);var K=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_RPC_HOST,t=new s.Connection(e);return new u.b(t,window.solana,T)},k=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,i,o,s,d,l,b,p,m,O,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K(),e.next=3,u.a.fetchIdl(f.c,t);case 3:return n=e.sent,r=new u.a(n,f.c,t),e.next=7,r.account.candyMachine.fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID);case 7:return i=e.sent,o=i.data.itemsAvailable.toNumber(),s=i.itemsRedeemed.toNumber(),d=o-s,l=i.data.goLiveDate.toNumber(),b="".concat(new Date(1e3*l).toGMTString()),h({itemsAvailable:o,itemsRedeemed:s,itemsRemaining:d,goLiveData:l,goLiveDateTimeString:b}),console.log({itemsAvailable:o,itemsRedeemed:s,itemsRemaining:d,goLiveData:l,goLiveDateTimeString:b}),w(!0),e.next=18,I(Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID,!0);case 18:if(0===(p=e.sent).length){e.next=26;break}return m=p.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.data.uri);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,console.log("Past Minted NFT",t),console.log("Response",r),e.abrupt("return",r.image);case 12:return e.prev=12,e.t0=e.catch(0),console.error("Failed retrieving Minted NFT",t),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),e.next=23,Promise.all(m);case 23:O=e.sent,S=O.filter((function(e){return null!==e})),g(S);case 26:w(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,i,o,s,d,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u.d.Connection(Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_RPC_HOST),e.next=3,S.getProgramAccounts(r,{filters:[{memcmp:{offset:326,bytes:t}}]});case 3:c=e.sent,i=[],o=0;case 6:if(!(o<c.length)){e.next=16;break}return s=c[o],e.next=10,r.getParsedAccountInfo(s.pubkey);case 10:d=e.sent,l=new O(t.toString(),d.value),n?i.push(l.data):i.push(l.data.mint);case 13:o++,e.next=6;break;case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.b.toBuffer(),n.toBuffer()],f.b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.b.toBuffer(),n.toBuffer(),e.from("edition")],f.b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.d.PublicKey.findProgramAddress([t.toBuffer(),d.e.toBuffer(),n.toBuffer()],f.a);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,i,o,l,b,p,m,O,S,T,h,j,x,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),t=u.d.Keypair.generate(),e.next=5,H(n.publicKey,t.publicKey);case 5:return r=e.sent,e.next=8,W(t.publicKey);case 8:return i=e.sent,e.next=11,L(t.publicKey);case 11:return o=e.sent,l=Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_RPC_HOST,b=new s.Connection(l),e.next=16,b.getMinimumBalanceForRentExemption(d.c.span);case 16:return p=e.sent,m={config:_,candyMachine:Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID,payer:n.publicKey,wallet:Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TREASURY_ADDRESS,mint:t.publicKey,metadata:i,masterEdition:o,mintAuthority:n.publicKey,updateAuthority:n.publicKey,tokenMetadataProgram:f.b,tokenProgram:d.e,systemProgram:v.programId,rent:u.d.SYSVAR_RENT_PUBKEY,clock:u.d.SYSVAR_CLOCK_PUBKEY},O=[t],S=[u.d.SystemProgram.createAccount({fromPubkey:n.publicKey,newAccountPubkey:t.publicKey,space:d.c.span,lamports:p,programId:d.e}),d.f.createInitMintInstruction(d.e,t.publicKey,0,n.publicKey,n.publicKey),F(r,n.publicKey,n.publicKey,t.publicKey),d.f.createMintToInstruction(d.e,t.publicKey,r,n.publicKey,[],1)],T=K(),e.next=23,u.a.fetchIdl(f.c,T);case 23:return h=e.sent,j=new u.a(h,f.c,T),e.next=27,j.rpc.mintNft({accounts:m,signers:O,instructions:S});case 27:x=e.sent,console.log("txn:",x),b.onSignatureWithOptions(x,function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("status"!==t.type){e.next=8;break}if(console.log("Receievd status event"),t.result.err){e.next=8;break}return console.log("NFT Minted!"),C(!1),e.next=8,k();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{commitment:"processed"}),e.next=39;break;case 32:e.prev=32,e.t0=e.catch(0),console.error(e.t0),E=e.t0.msg||"Minting failed! Please try again!",C(!1),e.t0.msg?311===e.t0.code?E="SOLD OUT!":312===e.t0.code&&(E="Minting period hasn't started yet."):e.t0.message.indexOf("0x138")||(e.t0.message.indexOf("0x137")?E="SOLD OUT!":e.t0.message.indexOf("0x135")&&(E="Insufficient funds to mint. Please fund your wallet.")),console.warn(E);case 39:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}(),F=function(t,n,r,a){var c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:u.d.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.e,isSigner:!1,isWritable:!1},{pubkey:u.d.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new u.d.TransactionInstruction({keys:c,programId:f.a,data:e.from([])})};return m&&Object(p.jsxs)("div",{className:"machine-container",children:[function(){var e=new Date,t=new Date(1e3*m.goLiveData);return e<t?(console.log("Before drop date!"),Object(p.jsx)(b.a,{dropDate:t})):Object(p.jsx)("p",{children:"Drop Date: ".concat(m.goLiveDateTimeString)})}(),Object(p.jsx)("p",{children:"Items Minted: ".concat(m.itemsRedeemed," / ").concat(m.itemsAvailable)}),m.itemsRedeemed===m.itemsAvailable?Object(p.jsx)("p",{className:"sub-text",children:"Sold Out \ud83d\ude4a"}):Object(p.jsx)("button",{className:"cta-button mint-button",onClick:M,disabled:A,children:"Mint NFT"}),R&&Object(p.jsx)("p",{children:"LOADING MINTS..."}),E.length>0&&Object(p.jsxs)("div",{className:"gif-container",children:[Object(p.jsx)("p",{className:"sub-text",children:"Minted Items \u2728"}),Object(p.jsx)("div",{className:"gif-grid",children:E.map((function(e){return Object(p.jsx)("div",{className:"gif-item",children:Object(p.jsx)("img",{src:e,alt:"Minted NFT ".concat(e)})},e)}))})]})]})}}).call(this,n(9).Buffer)},121:function(e,t,n){"use strict";var r=n(12),a=n(23),c=(n(205),n(16));t.a=function(e){var t=e.dropDate,n=Object(a.useState)(""),i=Object(r.a)(n,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){console.log("Setting interval...");var e=setInterval((function(){var n=(new Date).getTime(),r=t-n,a=Math.floor(r/864e5),c=Math.floor(r%864e5/36e5),i=Math.floor(r%36e5/6e4),o=Math.floor(r%6e4/1e3);s("".concat(a,"d ").concat(c,"h ").concat(i,"m ").concat(o,"s")),r<0&&(console.log("Clearing interval..."),clearInterval(e))}),1e3);return function(){e&&clearInterval(e)}}),[]),Object(c.jsxs)("div",{className:"timer-container",children:[Object(c.jsx)("p",{className:"timer-header",children:"Candy Drop Starting In"}),o&&Object(c.jsx)("p",{className:"timer-value",children:"\u23f0 ".concat(o)})]})}},128:function(e,t,n){},129:function(e,t,n){},132:function(e,t){},133:function(e,t){},161:function(e,t){},162:function(e,t){},205:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var r=n(23),a=n.n(r),c=n(114),i=n.n(c),o=(n(128),n(1)),s=n.n(o),u=n(4),d=n(12),l=(n(129),n.p+"static/media/twitter-logo.d89d9a86.svg"),b=n(115),f=n(16),p="ColdoneDrew",m="https://twitter.com/".concat(p);var O=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/candy-machine",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID);var e=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]);var c=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana)){e.next=11;break}if(!n.isPhantom){e.next=9;break}return console.log("Phantom wallet found!"),e.next=7,n.connect({onlyIfTrusted:!0});case 7:r=e.sent,a(r.publicKey.toString());case 9:e.next=12;break;case 11:alert("Solana object not found! Get a Phantom Wallet");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}if(!n.isPhantom){e.next=7;break}return e.next=5,n.connect();case 5:r=e.sent,a(r.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"header-container",children:[Object(f.jsx)("p",{className:"header",children:"NFT Candies"}),Object(f.jsx)("p",{className:"sub-text",children:"Gather your NFT broccoli"}),!n&&Object(f.jsx)("button",{className:"cta-button connect-wallet-button",onClick:i,children:"Connect to Wallet"})]}),n&&Object(f.jsx)(b.a,{walletAddress:window.solana}),Object(f.jsxs)("div",{className:"footer-container",children:[Object(f.jsx)("img",{alt:"Twitter Logo",className:"twitter-logo",src:l}),Object(f.jsx)("a",{className:"footer-text",href:m,target:"_blank",rel:"noreferrer",children:"built by @".concat(p)})]})]})})};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root"))},30:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(20),a=new r.d.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),c=new r.d.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),i=new r.d.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")}},[[208,1,2]]]);
//# sourceMappingURL=main.dab1965f.chunk.js.map